<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="theme-color" content="#ffbfd6">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>us log</title>
    <link href="https://fonts.googleapis.com/css2?family=Varela+Round&display=swap" rel="stylesheet">
    <style>
        /* --- CORE RESET & VARS --- */
        :root {
            --font-main: 'Varela Round', sans-serif;
            --ease: cubic-bezier(0.25, 1, 0.5, 1);
            --radius-bubble: 18px;
            --app-height: 100vh;
        }

        /* THEMES */
        [data-theme="sanrio"] {
            --bg-color: #ffe6ee;
            --text-color: #d15c82;
            --card-bg: rgba(255, 255, 255, 0.95);
            --card-bg-self: rgba(255, 235, 240, 0.95);
            --accent: #ff9ebb;
            --border: #ffbad2;
            --bg-pattern-size: 150px;
            --bg-image: url('https://upload.wikimedia.org/wikipedia/en/0/05/Hello_kitty_character_portrait.png'); 
        }
        [data-theme="chiikawa"] {
            --bg-color: #f0f8ff;
            --text-color: #4a6fa5;
            --card-bg: rgba(255, 255, 255, 0.95);
            --card-bg-self: rgba(235, 245, 255, 0.95);
            --accent: #89c2d9;
            --border: #a9d6e5;
            --bg-pattern-size: 120px;
            --bg-image: url('https://talktoabutt.site/chiikawa.webp'); 
        }
        [data-theme="dark"] {
            --bg-color: #0f0f0f;
            --text-color: #e0e0e0;
            --card-bg: rgba(40, 40, 40, 0.95);
            --card-bg-self: rgba(60, 60, 60, 0.95);
            --accent: #00ff9d;
            --border: #333;
            --bg-pattern-size: 0px; 
            --bg-image: none;
        }
        [data-theme="mocha"] {
            --bg-color: #fdf6e3;
            --text-color: #586e75;
            --card-bg: rgba(238, 232, 213, 0.95);
            --card-bg-self: rgba(225, 218, 195, 0.95);
            --accent: #b58900;
            --border: #d2b48c;
            --bg-pattern-size: 50px;
            --bg-image: radial-gradient(#d2b48c 20%, transparent 20%);
        }
        [data-theme="midnight"] {
            --bg-color: #000000;
            --text-color: #9d9d9d;
            --card-bg: rgba(30, 30, 30, 1);
            --card-bg-self: rgba(50, 50, 50, 1);
            --accent: #6a00ff;
            --border: #222;
            --bg-pattern-size: 0px;
            --bg-image: none;
        }
        [data-theme="froggy"] {
            --bg-color: #e8f5e9;
            --text-color: #2e7d32;
            --card-bg: rgba(255, 255, 255, 0.9);
            --card-bg-self: rgba(220, 245, 225, 0.95);
            --accent: #66bb6a;
            --border: #a5d6a7;
            --bg-pattern-size: 60px;
            --bg-image: url('https://talktoabutt.site/image.png');
        }

        * { box-sizing: border-box; text-transform: lowercase; -webkit-tap-highlight-color: transparent; }
        html, body { margin: 0; padding: 0; width: 100%; height: var(--app-height); overflow: hidden; overscroll-behavior: none; }
        body { font-family: var(--font-main); background-color: var(--bg-color); color: var(--text-color); transition: background 0.3s ease, color 0.3s ease; position: relative; }

        .bg-stickers {
            position: absolute; top: 0; left: 0; right: 0; bottom: 0;
            background-image: var(--bg-image); background-size: var(--bg-pattern-size); background-repeat: repeat;
            opacity: 0.15; pointer-events: none; z-index: 0; animation: float 20s linear infinite;
        }
        @keyframes float { from { background-position: 0 0; } to { background-position: 100px 100px; } }

        #app {
            position: relative; z-index: 1; display: flex; flex-direction: column;
            height: 100%; max-width: 600px; margin: 0 auto; background: transparent;
        }
        @media (min-width: 601px) {
            #app { border-left: 1px solid var(--border); border-right: 1px solid var(--border); box-shadow: 0 0 50px rgba(0,0,0,0.05); }
        }

        header {
            flex-shrink: 0; padding: 15px 20px; display: flex; justify-content: space-between; align-items: center;
            background: var(--card-bg); backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px);
            border-bottom: 1px solid var(--border); z-index: 10;
        }
        h1 { margin: 0; font-size: 1.1rem; }
        .header-actions { display: flex; gap: 10px; }
        .btn-small {
            background: none; border: 1px solid var(--border); color: var(--text-color); padding: 6px 10px;
            border-radius: 15px; cursor: pointer; font-family: inherit; font-size: 0.75rem;
        }

        #feed {
            flex-grow: 1; overflow-y: auto; -webkit-overflow-scrolling: touch; padding: 15px; scroll-behavior: smooth; min-height: 0;
        }
        .log-group { margin-bottom: 25px; }

        /* FIXED DATE HEADER */
        .date-header {
            font-size: 0.75rem; opacity: 0.8; margin-bottom: 15px; text-align: center;
            position: sticky; top: 0; z-index: 5;
            background: var(--bg-color); /* Solid bg prevents merge */
            border-bottom: 1px solid var(--border);
            padding: 8px 0;
            margin-left: -15px; margin-right: -15px; /* Stretch full width */
            backdrop-filter: blur(5px);
        }

        .entry-container { display: flex; flex-direction: column; width: 100%; margin-bottom: 8px; }
        .entry-container.self { align-items: flex-end; }
        .entry-container.other { align-items: flex-start; }
        .author-label { font-size: 0.65rem; margin-bottom: 2px; opacity: 0.7; margin-left: 10px; margin-right: 10px; }

        .entry {
            max-width: 85%; padding: 10px 14px; position: relative;
            box-shadow: 0 1px 3px rgba(0,0,0,0.05); animation: popIn 0.3s var(--ease);
            font-size: 0.95rem; line-height: 1.4; word-break: break-word; white-space: pre-wrap;
        }
        .entry-container.self .entry { background: var(--card-bg-self); border-radius: var(--radius-bubble) var(--radius-bubble) 4px var(--radius-bubble); border: 1px solid var(--border); }
        .entry-container.other .entry { background: var(--card-bg); border-radius: var(--radius-bubble) var(--radius-bubble) var(--radius-bubble) 4px; border: 1px solid var(--border); }

        .entry-meta { display: flex; justify-content: space-between; align-items: center; font-size: 0.7rem; opacity: 0.5; margin-top: 5px; gap: 10px; }
        .reactions-bar { display: flex; flex-wrap: wrap; gap: 4px; margin-top: 6px; }
        .reaction-pill { background: rgba(0,0,0,0.05); border-radius: 10px; padding: 2px 6px; font-size: 0.75rem; border: 1px solid transparent; }
        
        .action-icon-btn { background: none; border: none; opacity: 0.3; cursor: pointer; font-size: 0.9rem; padding: 0 3px; }
        .action-icon-btn:hover { opacity: 1; }
        .delete-btn { color: red; }

        .read-marker { font-size: 0.6rem; text-align: right; opacity: 0.6; margin-top: 4px; font-style: italic; display: flex; justify-content: flex-end; align-items: center; gap: 3px; }
        .read-marker::before { content: '‚úì'; font-size: 0.7rem; }

        /* INPUT AREA */
        #input-area {
            flex-shrink: 0; padding: 10px 15px; padding-bottom: max(10px, env(safe-area-inset-bottom));
            background: var(--card-bg); backdrop-filter: blur(12px); border-top: 1px solid var(--border);
            display: flex; gap: 8px; align-items: flex-end; z-index: 20;
        }
        #type-select {
            appearance: none; background: var(--bg-color); border: 1px solid var(--border); padding: 0;
            border-radius: 12px; font-size: 1.5rem; cursor: pointer; width: 45px; height: 45px; text-align: center;
        }
        /* Auto-growing textarea */
        #log-input {
            flex: 1; background: var(--bg-color); border: 1px solid var(--border); color: var(--text-color);
            padding: 12px 15px; border-radius: 20px; font-family: inherit; font-size: 1rem; outline: none;
            resize: none; min-height: 45px; max-height: 120px; line-height: 1.3;
        }
        #send-btn {
            background: var(--accent); color: white; border: none; width: 45px; height: 45px;
            border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: pointer;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1); flex-shrink: 0;
        }

        /* MODALS */
        .overlay-screen, .modal {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: var(--bg-color);
            z-index: 100; display: none; align-items: center; justify-content: center; flex-direction: column; padding: 20px;
        }
        .modal { background: rgba(0,0,0,0.6); backdrop-filter: blur(4px); }
        .modal.active, .overlay-screen.active { display: flex; }
        .modal-content {
            background: var(--bg-color); padding: 25px; border-radius: 20px; width: 95%; max-width: 380px;
            border: 1px solid var(--border); max-height: 85vh; overflow-y: auto; box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .theme-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin: 15px 0; }
        .theme-btn { padding: 10px; border: 1px solid var(--border); background: var(--card-bg); border-radius: 10px; color: var(--text-color); cursor: pointer; }
        .theme-btn.active { border: 2px solid var(--accent); }
        .full-input { width: 100%; padding: 12px; border-radius: 8px; border: 1px solid var(--border); background: var(--card-bg); color: var(--text-color); margin: 10px 0; font-family: inherit; }
        .action-btn { background: var(--accent); color: white; border: none; padding: 12px 20px; border-radius: 25px; cursor: pointer; font-family: inherit; font-size: 1rem; margin-top: 10px; }
        .stats-table { width: 100%; border-collapse: collapse; margin-top: 10px; font-size: 0.85rem; }
        .stats-table td { padding: 8px; border-bottom: 1px solid var(--border); }
        .stat-num { text-align: right; font-weight: bold; }

        @keyframes popIn { from { opacity: 0; transform: translateY(8px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body data-theme="sanrio">
    <div class="bg-stickers"></div>

    <div id="lock-screen" class="overlay-screen">
        <h2>üîí locked</h2>
        <input type="password" id="lock-pin" class="full-input" style="text-align:center; letter-spacing: 5px; max-width: 200px;" inputmode="numeric">
        <button class="action-btn" onclick="checkLock()">unlock</button>
    </div>

    <div id="setup-screen" class="overlay-screen">
        <h1>üëã welcome</h1>
        <p>pick a name for yourself:</p>
        <input type="text" id="setup-name" class="full-input" placeholder="name..." style="text-align:center;">
        <button class="action-btn" onclick="finishSetup()">start</button>
    </div>

    <div id="app" style="display:none;">
        <header>
            <h1>us log</h1>
            <div class="header-actions">
                <button class="btn-small" onclick="calculateStats()">stats</button>
                <button class="btn-small" onclick="toggleModal('settings')">‚öôÔ∏è</button>
            </div>
        </header>

        <div id="feed">
            <div style="text-align: center; padding: 20px; opacity: 0.5;">loading...</div>
        </div>

        <form id="input-area">
            <select id="type-select">
                <option value="food">üç±</option>
                <option value="activity">üéÆ</option>
                <option value="note">üìù</option>
                <option value="sleep">üí§</option>
            </select>
            <textarea id="log-input" placeholder="type here..." rows="1" required></textarea>
            <button type="submit" id="send-btn">‚ûú</button>
        </form>
    </div>

    <div id="settings-modal" class="modal">
        <div class="modal-content">
            <div style="display:flex; justify-content:space-between; align-items:center;">
                <h3>settings</h3>
                <button class="btn-small" onclick="toggleModal('settings')">close</button>
            </div>
            
            <p style="margin-top:15px; opacity:0.7;">themes</p>
            <div class="theme-grid">
                <button class="theme-btn" onclick="setTheme('sanrio')">sanrio</button>
                <button class="theme-btn" onclick="setTheme('chiikawa')">chiikawa</button>
                <button class="theme-btn" onclick="setTheme('froggy')">froggy</button>
                <button class="theme-btn" onclick="setTheme('mocha')">mocha</button>
                <button class="theme-btn" onclick="setTheme('dark')">dark</button>
                <button class="theme-btn" onclick="setTheme('midnight')">midnight</button>
            </div>

            <p style="margin-top:15px; opacity:0.7;">security</p>
            <input type="text" id="set-pin" class="full-input" placeholder="set pin (empty to remove)">
            <button class="btn-small" style="width:100%" onclick="savePin()">save pin</button>

            <div style="margin-top: 25px; padding-top: 15px; border-top: 1px solid var(--border);">
                <p style="opacity:0.7; font-size:0.9rem;">identity</p>
                <p>current name: <strong id="current-user-display"></strong></p>
                <input type="text" id="new-username-input" class="full-input" placeholder="new name...">
                <button class="btn-small" style="width:100%; background: var(--accent); color:#fff; border:none;" onclick="changeNameSophisticated()">migrate name & posts</button>
                <p style="font-size:0.7rem; opacity:0.6; margin-top:5px; text-align:center;">this will update all your past posts too.</p>
            </div>
        </div>
    </div>

    <div id="stats-modal" class="modal">
        <div class="modal-content">
            <div style="display:flex; justify-content:space-between; align-items:center;">
                <h3>history</h3>
                <button class="btn-small" onclick="toggleModal('stats')">close</button>
            </div>
            <div id="stats-content"></div>
        </div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js";
        import { getFirestore, collection, addDoc, query, orderBy, limit, onSnapshot, serverTimestamp, updateDoc, doc, writeBatch, arrayUnion, where, getDocs, deleteDoc } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyAnz5Nfuooy5cyv2xqAhb79m8FDXSpMsi8",
            authDomain: "loveapp-e565a.firebaseapp.com",
            projectId: "loveapp-e565a",
            storageBucket: "loveapp-e565a.firebasestorage.app",
            messagingSenderId: "942341178242",
            appId: "1:942341178242:web:10dc0420a66d75247f459b"
        };

        let db;
        
        // Expose functions globally for HTML onclicks
        window.reactToPost = async (id) => {
            const emoji = prompt("pick an emoji:", "‚ù§Ô∏è");
            if(emoji) {
                const docRef = doc(db, "logs", id);
                const currentUser = localStorage.getItem('username');
                const updateKey = `reactions.${currentUser}`;
                const payload = {}; payload[updateKey] = emoji;
                try { await updateDoc(docRef, payload); } catch(e) { console.error(e); }
            }
        };

        window.deletePost = async (id) => {
            if(confirm("delete this message?")) {
                try { await deleteDoc(doc(db, "logs", id)); } catch(e) { alert(e.message); }
            }
        }

        // --- SOPHISTICATED NAME CHANGE ---
        window.changeNameSophisticated = async () => {
            const oldName = localStorage.getItem('username');
            const newName = document.getElementById('new-username-input').value.trim();
            
            if(!newName || newName === oldName) return alert("please enter a different name");
            if(!confirm(`change name from "${oldName}" to "${newName}" and update all past posts?`)) return;

            const btn = document.querySelector('button[onclick="changeNameSophisticated()"]');
            btn.textContent = "migrating...";
            btn.disabled = true;

            try {
                // 1. Query all posts by old user
                // Note: This relies on index. If fails, it might need composite index creation in Firebase console.
                // For small datasets without index, it might error, but simple 'where' usually works fine.
                const q = query(collection(db, "logs"), where("author", "==", oldName));
                const querySnapshot = await getDocs(q);

                // 2. Batch update (limit 500 per batch)
                const batch = writeBatch(db);
                let count = 0;
                
                querySnapshot.forEach((doc) => {
                    batch.update(doc.ref, { author: newName });
                    count++;
                });

                if(count > 0) await batch.commit();

                // 3. Update local storage and reload
                localStorage.setItem('username', newName);
                alert(`success! updated ${count} posts.`);
                location.reload();

            } catch(e) {
                alert("error migrating: " + e.message);
                btn.textContent = "try again";
                btn.disabled = false;
            }
        };

        try {
            const app = initializeApp(firebaseConfig);
            db = getFirestore(app);
            initApp();
        } catch (e) { console.error(e); }

        function initApp() {
            const feedEl = document.getElementById('feed');
            const form = document.getElementById('input-area');
            const typeSelect = document.getElementById('type-select');
            const logInput = document.getElementById('log-input');

            // Auto-resize textarea
            logInput.addEventListener('input', function() {
                this.style.height = 'auto';
                this.style.height = (this.scrollHeight) + 'px';
            });

            const q = query(collection(db, "logs"), orderBy("timestamp", "desc"), limit(60));
            
            onSnapshot(q, (snapshot) => {
                const currentUser = localStorage.getItem('username');
                const batch = writeBatch(db);
                let needsCommit = false;
                
                // Helper to check scroll position
                const isNearBottom = (feedEl.scrollHeight - feedEl.scrollTop - feedEl.clientHeight) < 100;

                const rawLogs = [];
                snapshot.forEach(doc => {
                    const data = doc.data();
                    if(data.timestamp) rawLogs.push({id: doc.id, ...data});
                    
                    // Read Receipt Logic
                    const isSelf = data.author === currentUser;
                    const readBy = data.read_by || [];
                    if (!isSelf && currentUser && !readBy.includes(currentUser)) {
                        batch.update(doc.ref, { read_by: arrayUnion(currentUser) });
                        needsCommit = true;
                    }
                });

                if (needsCommit) batch.commit();

                // Group by date
                const grouped = {};
                rawLogs.forEach(item => {
                    const dateObj = item.timestamp.toDate();
                    const dateStr = dateObj.toLocaleDateString('en-US', { weekday: 'long', month: 'short', day: 'numeric' });
                    if (!grouped[dateStr]) grouped[dateStr] = [];
                    grouped[dateStr].push({ ...item, time: dateObj });
                });

                feedEl.innerHTML = '';

                Object.keys(grouped).forEach(date => {
                    const dh = document.createElement('div');
                    dh.className = 'date-header';
                    dh.textContent = date;
                    feedEl.appendChild(dh);

                    const groupDiv = document.createElement('div');
                    groupDiv.className = 'log-group';

                    grouped[date].forEach(item => {
                        const isSelf = item.author === currentUser;
                        const alignClass = isSelf ? 'self' : 'other';
                        const timeStr = item.time.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
                        
                        let icon = 'üìù';
                        if(item.type === 'food') icon = 'üç±';
                        if(item.type === 'activity') icon = 'üéÆ';
                        if(item.type === 'sleep') icon = 'üí§';

                        let reactHtml = '';
                        if(item.reactions) {
                            reactHtml = `<div class="reactions-bar">`;
                            for (const [user, emoji] of Object.entries(item.reactions)) {
                                reactHtml += `<span class="reaction-pill" title="${user}">${emoji}</span>`;
                            }
                            reactHtml += `</div>`;
                        }

                        let seenHtml = '';
                        if (item.read_by && item.read_by.length > 0) {
                            const seers = item.read_by.filter(name => name !== item.author);
                            if (seers.length > 0) seenHtml = `<div class="read-marker">seen by ${escapeHtml(seers.join(', '))}</div>`;
                        }

                        // Delete button for self
                        let deleteBtn = isSelf ? `<button class="action-icon-btn delete-btn" onclick="deletePost('${item.id}')">√ó</button>` : '';

                        const el = document.createElement('div');
                        el.className = `entry-container ${alignClass}`;
                        el.innerHTML = `
                            <div class="author-label">${escapeHtml(item.author || 'anon')}</div>
                            <div class="entry">
                                <span>${icon} ${escapeHtml(item.content)}</span>
                                <div class="entry-meta">
                                    <span>${timeStr}</span>
                                    <div>
                                        ${deleteBtn}
                                        <button class="action-icon-btn" onclick="window.reactToPost('${item.id}')">+</button>
                                    </div>
                                </div>
                                ${reactHtml}
                                ${seenHtml}
                            </div>
                        `;
                        groupDiv.appendChild(el);
                    });
                    feedEl.appendChild(groupDiv);
                });
            });

            form.addEventListener('submit', async (e) => {
                e.preventDefault();
                const content = logInput.value.trim();
                const type = typeSelect.value;
                const author = localStorage.getItem('username');
                
                if (!content || !author) return;

                logInput.value = '';
                logInput.style.height = 'auto'; // Reset height
                logInput.blur(); 

                try {
                    await addDoc(collection(db, "logs"), {
                        content: content, type: type, author: author,
                        reactions: {}, read_by: [], timestamp: serverTimestamp()
                    });
                } catch (e) { alert("error saving: " + e.message); }
            });
        }

        function escapeHtml(text) {
            if (!text) return text;
            return text.replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;");
        }
    </script>

    <script>
        // --- UTILS ---
        const appHeight = () => { document.documentElement.style.setProperty('--app-height', `${window.innerHeight}px`); }
        window.addEventListener('resize', appHeight); appHeight();

        const currentUser = localStorage.getItem('username');
        const savedPin = localStorage.getItem('app_pin');

        if (savedPin) document.getElementById('lock-screen').classList.add('active');
        else if (!currentUser) document.getElementById('setup-screen').classList.add('active');
        else document.getElementById('app').style.display = 'flex';

        document.getElementById('current-user-display').textContent = currentUser || 'unknown';

        function finishSetup() {
            const name = document.getElementById('setup-name').value.trim();
            if(name) { localStorage.setItem('username', name); location.reload(); }
        }

        function savePin() {
            const pin = document.getElementById('set-pin').value.trim();
            if(pin === "") { localStorage.removeItem('app_pin'); alert("lock removed"); }
            else { localStorage.setItem('app_pin', pin); alert("pin saved"); }
            toggleModal('settings');
        }

        function checkLock() {
            const input = document.getElementById('lock-pin').value;
            const saved = localStorage.getItem('app_pin');
            if(input === saved) {
                document.getElementById('lock-screen').classList.remove('active');
                if(!localStorage.getItem('username')) document.getElementById('setup-screen').classList.add('active');
                else document.getElementById('app').style.display = 'flex';
            } else {
                alert("wrong pin");
                document.getElementById('lock-pin').value = '';
            }
        }

        window.calculateStats = function() {
            const entries = document.querySelectorAll('.entry-container');
            const stats = {};
            entries.forEach(el => {
                const name = el.querySelector('.author-label').textContent;
                const text = el.querySelector('.entry').textContent;
                let type = 'note';
                if(text.includes('üç±')) type = 'food';
                if(text.includes('üéÆ')) type = 'activity';
                if(text.includes('üí§')) type = 'sleep';
                
                if(!stats[name]) stats[name] = { total: 0, food: 0, activity: 0, sleep: 0 };
                stats[name].total++;
                stats[name][type]++;
            });

            let html = '<table class="stats-table">';
            for(const [name, data] of Object.entries(stats)) {
                html += `<tr><td colspan="2" style="background:var(--accent); color:#fff;"><strong>${name}</strong></td></tr>
                         <tr><td>total posts</td><td class="stat-num">${data.total}</td></tr>
                         <tr><td>meals</td><td class="stat-num">${data.food}</td></tr>`;
            }
            html += '</table>';
            document.getElementById('stats-content').innerHTML = html;
            toggleModal('stats');
        }

        const savedTheme = localStorage.getItem('theme') || 'sanrio';
        setTheme(savedTheme);

        function setTheme(themeName) {
            document.body.setAttribute('data-theme', themeName);
            localStorage.setItem('theme', themeName);
            document.querySelector('meta[name="theme-color"]').setAttribute('content', getComputedStyle(document.body).getPropertyValue('--bg-color').trim());
            document.querySelectorAll('.theme-btn').forEach(btn => {
                btn.classList.remove('active');
                if(btn.textContent.trim() === themeName) btn.classList.add('active');
            });
        }

        function toggleModal(name) { document.getElementById(`${name}-modal`).classList.toggle('active'); }
        window.onclick = function(event) { if (event.target.classList.contains('modal')) event.target.classList.remove('active'); }
    </script>
</body>
</html>
