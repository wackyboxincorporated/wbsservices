<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="theme-color" content="#ffbfd6">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>us log</title>
    <link href="https://fonts.googleapis.com/css2?family=Varela+Round&display=swap" rel="stylesheet">
    <style>
        /* --- CORE RESET & VARS --- */
        :root {
            --font-main: 'Varela Round', sans-serif;
            --ease: cubic-bezier(0.25, 1, 0.5, 1);
            --radius-bubble: 18px;
            /* Fallback for browsers with no JS */
            --app-height: 100vh;
        }

        /* THEME DEFINITIONS */
        /* 1. Sanrio */
        [data-theme="sanrio"] {
            --bg-color: #ffe6ee;
            --text-color: #d15c82;
            --card-bg: rgba(255, 255, 255, 0.9);
            --card-bg-self: rgba(255, 235, 240, 0.95);
            --accent: #ff9ebb;
            --border: #ffbad2;
            --bg-pattern-size: 150px;
            --bg-image: url('https://upload.wikimedia.org/wikipedia/en/0/05/Hello_kitty_character_portrait.png'); 
        }

        /* 2. Chiikawa */
        [data-theme="chiikawa"] {
            --bg-color: #f0f8ff;
            --text-color: #4a6fa5;
            --card-bg: rgba(255, 255, 255, 0.9);
            --card-bg-self: rgba(235, 245, 255, 0.95);
            --accent: #89c2d9;
            --border: #a9d6e5;
            --bg-pattern-size: 120px;
            --bg-image: url('https://talktoabutt.site/chiikawa.webp'); 
        }

        /* 3. Dark */
        [data-theme="dark"] {
            --bg-color: #0f0f0f;
            --text-color: #e0e0e0;
            --card-bg: rgba(40, 40, 40, 0.9);
            --card-bg-self: rgba(60, 60, 60, 0.9);
            --accent: #00ff9d;
            --border: #333;
            --bg-pattern-size: 0px; 
            --bg-image: none;
        }

        /* 4. Mocha */
        [data-theme="mocha"] {
            --bg-color: #fdf6e3;
            --text-color: #586e75;
            --card-bg: rgba(238, 232, 213, 0.9);
            --card-bg-self: rgba(225, 218, 195, 0.95);
            --accent: #b58900;
            --border: #d2b48c;
            --bg-pattern-size: 50px;
            --bg-image: radial-gradient(#d2b48c 20%, transparent 20%);
        }

        /* 5. Midnight */
        [data-theme="midnight"] {
            --bg-color: #000000;
            --text-color: #9d9d9d;
            --card-bg: rgba(30, 30, 30, 1);
            --card-bg-self: rgba(50, 50, 50, 1);
            --accent: #6a00ff;
            --border: #222;
            --bg-pattern-size: 0px;
            --bg-image: none;
        }

        /* 6. Froggy */
        [data-theme="froggy"] {
            --bg-color: #e8f5e9;
            --text-color: #2e7d32;
            --card-bg: rgba(255, 255, 255, 0.85);
            --card-bg-self: rgba(220, 245, 225, 0.9);
            --accent: #66bb6a;
            --border: #a5d6a7;
            --bg-pattern-size: 60px;
            --bg-image: url('https://talktoabutt.site/image.png');
        }

        * {
            box-sizing: border-box;
            text-transform: lowercase;
            -webkit-tap-highlight-color: transparent;
        }

        html, body {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%; /* Fallback */
            height: var(--app-height); /* JS Calculated Height */
            overflow: hidden; /* CRITICAL: Prevents body scroll */
            overscroll-behavior: none; /* Prevents rubber banding */
        }

        body {
            font-family: var(--font-main);
            background-color: var(--bg-color);
            color: var(--text-color);
            transition: background 0.3s ease, color 0.3s ease;
            position: relative;
        }

        /* BACKGROUND */
        .bg-stickers {
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background-image: var(--bg-image);
            background-size: var(--bg-pattern-size);
            background-repeat: repeat;
            opacity: 0.15;
            pointer-events: none;
            z-index: 0;
            animation: float 20s linear infinite;
        }

        @keyframes float {
            from { background-position: 0 0; }
            to { background-position: 100px 100px; }
        }

        /* LAYOUT - THE FIX IS HERE */
        #app {
            position: relative;
            z-index: 1;
            display: flex;
            flex-direction: column; /* Stack vertically */
            height: 100%; /* Fill the constrained body */
            max-width: 600px;
            margin: 0 auto;
            background: transparent;
        }

        @media (min-width: 601px) {
            #app {
                border-left: 1px solid var(--border);
                border-right: 1px solid var(--border);
                box-shadow: 0 0 50px rgba(0,0,0,0.05);
            }
        }

        /* HEADER */
        header {
            flex-shrink: 0; /* Never shrink */
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: var(--card-bg);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-bottom: 1px solid var(--border);
            z-index: 10;
        }

        h1 { margin: 0; font-size: 1.1rem; }
        
        .header-actions { display: flex; gap: 10px; }

        .btn-small {
            background: none;
            border: 1px solid var(--border);
            color: var(--text-color);
            padding: 6px 10px;
            border-radius: 15px;
            cursor: pointer;
            font-family: inherit;
            font-size: 0.75rem;
        }

        /* FEED AREA - SCROLLING HAPPENS HERE ONLY */
        #feed {
            flex-grow: 1; /* Take all available space */
            overflow-y: auto; /* Scroll ONLY this element */
            -webkit-overflow-scrolling: touch; /* Smooth scroll iOS */
            padding: 15px;
            scroll-behavior: smooth;
            min-height: 0; /* CRITICAL FLEXBOX FIX */
        }

        .log-group { margin-bottom: 25px; }

        .date-header {
            font-size: 0.75rem;
            opacity: 0.6;
            margin-bottom: 15px;
            text-align: center;
            position: sticky;
            top: 0;
            z-index: 5;
            text-shadow: 0 2px 10px var(--bg-color);
            background: rgba(255,255,255,0.0); 
            padding: 5px 0;
        }

        .entry-container {
            display: flex;
            flex-direction: column;
            width: 100%;
            margin-bottom: 8px;
        }

        .entry-container.self { align-items: flex-end; }
        .entry-container.other { align-items: flex-start; }

        .author-label {
            font-size: 0.65rem;
            margin-bottom: 2px;
            opacity: 0.7;
            margin-left: 10px;
            margin-right: 10px;
        }

        .entry {
            max-width: 85%;
            padding: 10px 14px;
            position: relative;
            box-shadow: 0 1px 3px rgba(0,0,0,0.05);
            animation: popIn 0.3s var(--ease);
            font-size: 0.95rem;
            line-height: 1.4;
            word-break: break-word;
        }

        .entry-container.self .entry {
            background: var(--card-bg-self);
            border-radius: var(--radius-bubble) var(--radius-bubble) 4px var(--radius-bubble);
            border: 1px solid var(--border);
        }

        .entry-container.other .entry {
            background: var(--card-bg);
            border-radius: var(--radius-bubble) var(--radius-bubble) var(--radius-bubble) 4px;
            border: 1px solid var(--border);
        }

        .entry-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.7rem;
            opacity: 0.5;
            margin-top: 5px;
            gap: 10px;
        }

        .reactions-bar {
            display: flex;
            flex-wrap: wrap;
            gap: 4px;
            margin-top: 6px;
        }

        .reaction-pill {
            background: rgba(0,0,0,0.05);
            border-radius: 10px;
            padding: 2px 6px;
            font-size: 0.75rem;
            border: 1px solid transparent;
        }
        
        .add-react-btn {
            background: none;
            border: none;
            opacity: 0.3;
            cursor: pointer;
            font-size: 0.9rem;
            padding: 0 5px;
        }
        .add-react-btn:hover { opacity: 1; }

        /* READ RECEIPTS STYLING */
        .read-marker {
            font-size: 0.6rem;
            text-align: right;
            opacity: 0.6;
            margin-top: 4px;
            font-style: italic;
            display: flex;
            justify-content: flex-end;
            align-items: center;
            gap: 3px;
        }
        .read-marker::before {
            content: '‚úì'; 
            font-size: 0.7rem;
        }

        /* INPUT AREA */
        #input-area {
            flex-shrink: 0; /* Never shrink */
            padding: 10px 15px;
            padding-bottom: max(10px, env(safe-area-inset-bottom)); /* iPhone X fix */
            background: var(--card-bg);
            backdrop-filter: blur(12px);
            border-top: 1px solid var(--border);
            display: flex;
            gap: 8px;
            align-items: center;
            z-index: 20;
        }

        #type-select {
            appearance: none;
            background: var(--bg-color);
            border: 1px solid var(--border);
            padding: 10px;
            border-radius: 12px;
            font-size: 1.2rem;
            cursor: pointer;
            width: 45px;
            text-align: center;
        }

        #log-input {
            flex: 1;
            background: var(--bg-color);
            border: 1px solid var(--border);
            color: var(--text-color);
            padding: 10px 15px;
            border-radius: 20px;
            font-family: inherit;
            font-size: 1rem;
            outline: none;
        }

        #send-btn {
            background: var(--accent);
            color: white;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        /* MODALS & OVERLAYS */
        .overlay-screen, .modal {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: var(--bg-color);
            z-index: 100;
            display: none;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            padding: 20px;
        }
        
        .modal { background: rgba(0,0,0,0.5); backdrop-filter: blur(3px); }
        .modal.active, .overlay-screen.active { display: flex; }

        .modal-content {
            background: var(--bg-color);
            padding: 25px;
            border-radius: 20px;
            width: 90%;
            max-width: 350px;
            border: 1px solid var(--border);
            max-height: 80vh;
            overflow-y: auto;
        }

        .theme-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin: 15px 0; }
        .theme-btn { padding: 10px; border: 1px solid var(--border); background: var(--card-bg); border-radius: 10px; color: var(--text-color); cursor: pointer; }
        .theme-btn.active { border: 2px solid var(--accent); }

        .full-input { width: 100%; padding: 12px; border-radius: 8px; border: 1px solid var(--border); background: var(--card-bg); color: var(--text-color); margin: 10px 0; font-family: inherit; }
        .action-btn { background: var(--accent); color: white; border: none; padding: 12px 20px; border-radius: 25px; cursor: pointer; font-family: inherit; font-size: 1rem; margin-top: 10px; }

        .stats-table { width: 100%; border-collapse: collapse; margin-top: 10px; font-size: 0.85rem; }
        .stats-table td { padding: 8px; border-bottom: 1px solid var(--border); }
        .stats-table tr:last-child td { border-bottom: none; }
        .stat-num { text-align: right; font-weight: bold; }

        @keyframes popIn {
            from { opacity: 0; transform: translateY(5px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body data-theme="sanrio">

    <div class="bg-stickers"></div>

    <div id="lock-screen" class="overlay-screen">
        <h2>üîí locked</h2>
        <p>enter pin ...</p>
        <input type="password" id="lock-pin" class="full-input" style="text-align:center; letter-spacing: 5px; max-width: 200px;" inputmode="numeric">
        <button class="action-btn" onclick="checkLock()">unlock</button>
    </div>

    <div id="setup-screen" class="overlay-screen">
        <h1>üëã welcome</h1>
        <p>he knows your name. you can choose it anyway!</p>
        <p>what do you want to be called?</p>
        <input type="text" id="setup-name" class="full-input" placeholder="e.g. 'his beautiful angel'.." style="text-align:center;">
        <button class="action-btn" onclick="finishSetup()">start logging</button>
    </div>

    <div id="app" style="display:none;">
        <header>
            <h1>us log</h1>
            <div class="header-actions">
                <button class="btn-small" onclick="calculateStats()">stats</button>
                <button class="btn-small" onclick="toggleModal('settings')">‚öôÔ∏è</button>
            </div>
        </header>

        <div id="feed">
            <div style="text-align: center; padding: 20px; opacity: 0.5;">loading...</div>
        </div>

        <form id="input-area">
            <select id="type-select">
                <option value="food">üç±</option>
                <option value="activity">üéÆ</option>
                <option value="note">üìù</option>
                <option value="sleep">üí§</option>
            </select>
            <input type="text" id="log-input" placeholder="type here..." autocomplete="off" required>
            <button type="submit" id="send-btn">‚ûú</button>
        </form>
    </div>

    <div id="settings-modal" class="modal">
        <div class="modal-content">
            <div style="display:flex; justify-content:space-between; align-items:center;">
                <h3>settings</h3>
                <button class="btn-small" onclick="toggleModal('settings')">close</button>
            </div>
            
            <p style="margin-top:15px; opacity:0.7;">themes</p>
            <div class="theme-grid">
                <button class="theme-btn" onclick="setTheme('sanrio')">sanrio</button>
                <button class="theme-btn" onclick="setTheme('chiikawa')">chiikawa</button>
                <button class="theme-btn" onclick="setTheme('froggy')">froggy</button>
                <button class="theme-btn" onclick="setTheme('mocha')">mocha</button>
                <button class="theme-btn" onclick="setTheme('dark')">dark</button>
                <button class="theme-btn" onclick="setTheme('midnight')">midnight</button>
            </div>

            <p style="margin-top:15px; opacity:0.7;">security</p>
            <input type="text" id="set-pin" class="full-input" placeholder="set a pin (leave empty for none)">
            <button class="btn-small" style="width:100%" onclick="savePin()">save pin</button>

            <div style="margin-top: 20px; text-align: center;">
                <p>logged in as: <strong id="current-user-display"></strong></p>
                <button class="btn-small" onclick="resetUser()">change name</button>
            </div>
        </div>
    </div>

    <div id="stats-modal" class="modal">
        <div class="modal-content">
            <div style="display:flex; justify-content:space-between; align-items:center;">
                <h3>historical view</h3>
                <button class="btn-small" onclick="toggleModal('stats')">close</button>
            </div>
            <div id="stats-content"></div>
        </div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js";
        import { getFirestore, collection, addDoc, query, orderBy, limit, onSnapshot, serverTimestamp, updateDoc, doc, writeBatch, arrayUnion } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyAnz5Nfuooy5cyv2xqAhb79m8FDXSpMsi8",
            authDomain: "loveapp-e565a.firebaseapp.com",
            projectId: "loveapp-e565a",
            storageBucket: "loveapp-e565a.firebasestorage.app",
            messagingSenderId: "942341178242",
            appId: "1:942341178242:web:10dc0420a66d75247f459b"
        };

        let db;
        
        window.reactToPost = async (id) => {
            const emoji = prompt("pick an emoji (type it using your keyboard):", "‚ù§Ô∏è");
            if(emoji) {
                const docRef = doc(db, "logs", id);
                const currentUser = localStorage.getItem('username');
                const updateKey = `reactions.${currentUser}`;
                const updatePayload = {};
                updatePayload[updateKey] = emoji;
                try {
                    await updateDoc(docRef, updatePayload);
                } catch(e) { console.error(e); }
            }
        };

        try {
            const app = initializeApp(firebaseConfig);
            db = getFirestore(app);
            initApp();
        } catch (e) {
            console.error(e);
        }

        let loadedLogs = []; 

        function initApp() {
            const feedEl = document.getElementById('feed');
            const form = document.getElementById('input-area');
            const typeSelect = document.getElementById('type-select');
            const logInput = document.getElementById('log-input');

            const q = query(collection(db, "logs"), orderBy("timestamp", "desc"), limit(60));
            
            onSnapshot(q, (snapshot) => {
                feedEl.innerHTML = '';
                loadedLogs = [];
                const currentUser = localStorage.getItem('username');

                const grouped = {};
                const batch = writeBatch(db);
                let needsCommit = false;
                
                snapshot.forEach((docSnap) => {
                    const data = docSnap.data();
                    if(!data.timestamp) return;
                    
                    // --- READ RECEIPT LOGIC ---
                    // If I am NOT the author, and my name is NOT in read_by array
                    const isSelf = data.author === currentUser;
                    const readBy = data.read_by || [];
                    
                    if (!isSelf && currentUser && !readBy.includes(currentUser)) {
                        batch.update(docSnap.ref, {
                            read_by: arrayUnion(currentUser)
                        });
                        needsCommit = true;
                    }
                    // --------------------------

                    loadedLogs.push(data);
                    
                    const dateObj = data.timestamp.toDate();
                    const dateStr = dateObj.toLocaleDateString('en-US', { weekday: 'long', month: 'short', day: 'numeric' });
                    
                    if (!grouped[dateStr]) grouped[dateStr] = [];
                    grouped[dateStr].push({ id: docSnap.id, ...data, time: dateObj, readBy: readBy });
                });

                if (needsCommit) {
                    batch.commit().catch(err => console.log("receipt update error", err));
                }

                Object.keys(grouped).forEach(date => {
                    const dh = document.createElement('div');
                    dh.className = 'date-header';
                    dh.textContent = date;
                    feedEl.appendChild(dh);

                    const groupDiv = document.createElement('div');
                    groupDiv.className = 'log-group';

                    grouped[date].forEach(item => {
                        const isSelf = item.author === currentUser;
                        const alignClass = isSelf ? 'self' : 'other';
                        
                        const timeStr = item.time.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
                        
                        let icon = '';
                        if(item.type === 'food') icon = 'üç±';
                        else if(item.type === 'activity') icon = 'üéÆ';
                        else if(item.type === 'sleep') icon = 'üí§';
                        else icon = 'üìù';

                        let reactHtml = '';
                        if(item.reactions) {
                            reactHtml = `<div class="reactions-bar">`;
                            for (const [user, emoji] of Object.entries(item.reactions)) {
                                reactHtml += `<span class="reaction-pill" title="${user}">${emoji}</span>`;
                            }
                            reactHtml += `</div>`;
                        }

                        // Generate Read Receipts HTML
                        let seenHtml = '';
                        if (item.readBy && item.readBy.length > 0) {
                            // Don't show the author that they read their own post (if logic ever fails)
                            // Show who ELSE has seen it.
                            const seers = item.readBy.filter(name => name !== item.author);
                            if (seers.length > 0) {
                                seenHtml = `<div class="read-marker">seen by ${escapeHtml(seers.join(', '))}</div>`;
                            }
                        }

                        const el = document.createElement('div');
                        el.className = `entry-container ${alignClass}`;
                        el.innerHTML = `
                            <div class="author-label">${escapeHtml(item.author || 'anon')}</div>
                            <div class="entry">
                                <span>${icon} ${escapeHtml(item.content)}</span>
                                <div class="entry-meta">
                                    <span>${timeStr}</span>
                                    <button class="add-react-btn" onclick="window.reactToPost('${item.id}')">+</button>
                                </div>
                                ${reactHtml}
                                ${seenHtml}
                            </div>
                        `;
                        groupDiv.appendChild(el);
                    });
                    feedEl.appendChild(groupDiv);
                });
            });

            form.addEventListener('submit', async (e) => {
                e.preventDefault();
                const content = logInput.value.trim();
                const type = typeSelect.value;
                const author = localStorage.getItem('username');
                
                if (!content || !author) return;

                logInput.value = '';
                logInput.blur(); 

                try {
                    await addDoc(collection(db, "logs"), {
                        content: content,
                        type: type,
                        author: author,
                        reactions: {},
                        read_by: [], // Initialize empty read receipts
                        timestamp: serverTimestamp()
                    });
                } catch (e) {
                    alert("error saving: " + e.message);
                }
            });
        }

        function escapeHtml(text) {
            if (!text) return text;
            return text.replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;");
        }
    </script>

    <script>
        // --- VIEWPORT FIX SCRIPT ---
        // This calculates the real viewport height including mobile URL bars
        const appHeight = () => {
            const doc = document.documentElement;
            doc.style.setProperty('--app-height', `${window.innerHeight}px`);
        }
        window.addEventListener('resize', appHeight);
        appHeight();
        // ---------------------------

        const currentUser = localStorage.getItem('username');
        const savedPin = localStorage.getItem('app_pin');

        if (savedPin) {
            document.getElementById('lock-screen').classList.add('active');
        } else if (!currentUser) {
            document.getElementById('setup-screen').classList.add('active');
        } else {
            document.getElementById('app').style.display = 'flex';
        }

        document.getElementById('current-user-display').textContent = currentUser || 'unknown';

        function finishSetup() {
            const name = document.getElementById('setup-name').value.trim();
            if(name) {
                localStorage.setItem('username', name);
                location.reload();
            }
        }

        function resetUser() {
            if(confirm("reset user name?")) {
                localStorage.removeItem('username');
                location.reload();
            }
        }

        function savePin() {
            const pin = document.getElementById('set-pin').value.trim();
            if(pin === "") {
                localStorage.removeItem('app_pin');
                alert("lock removed");
            } else {
                localStorage.setItem('app_pin', pin);
                alert("pin saved. app will lock on next restart.");
            }
            toggleModal('settings');
        }

        function checkLock() {
            const input = document.getElementById('lock-pin').value;
            const saved = localStorage.getItem('app_pin');
            if(input === saved) {
                document.getElementById('lock-screen').classList.remove('active');
                if(!localStorage.getItem('username')) {
                    document.getElementById('setup-screen').classList.add('active');
                } else {
                    document.getElementById('app').style.display = 'flex';
                }
            } else {
                alert("wrong pin");
                document.getElementById('lock-pin').value = '';
            }
        }

        window.calculateStats = function() {
            const entries = document.querySelectorAll('.entry-container');
            const stats = {};
            
            entries.forEach(el => {
                const name = el.querySelector('.author-label').textContent;
                const text = el.querySelector('.entry').textContent;
                
                let type = 'note';
                if(text.includes('üç±')) type = 'food';
                if(text.includes('üéÆ')) type = 'activity';
                if(text.includes('üí§')) type = 'sleep';
                
                if(!stats[name]) stats[name] = { total: 0, food: 0, activity: 0, sleep: 0 };
                
                stats[name].total++;
                stats[name][type]++;
            });

            let html = '<table class="stats-table">';
            for(const [name, data] of Object.entries(stats)) {
                html += `
                    <tr><td colspan="2" style="background:var(--accent); color:#fff;"><strong>${name}</strong></td></tr>
                    <tr><td>total posts</td><td class="stat-num">${data.total}</td></tr>
                    <tr><td>meals</td><td class="stat-num">${data.food}</td></tr>
                    <tr><td>activities</td><td class="stat-num">${data.activity}</td></tr>
                `;
            }
            html += '</table><p style="text-align:center; opacity:0.5; margin-top:10px;">(based on currently loaded posts)</p>';
            
            document.getElementById('stats-content').innerHTML = html;
            toggleModal('stats');
        }

        const savedTheme = localStorage.getItem('theme') || 'sanrio';
        setTheme(savedTheme);

        function setTheme(themeName) {
            document.body.setAttribute('data-theme', themeName);
            localStorage.setItem('theme', themeName);
            updateMetaColor();
            
            document.querySelectorAll('.theme-btn').forEach(btn => {
                btn.classList.remove('active');
                if(btn.textContent.trim() === themeName) btn.classList.add('active');
            });
        }

        function toggleModal(name) {
            const m = document.getElementById(`${name}-modal`);
            m.classList.toggle('active');
        }

        function updateMetaColor() {
            const meta = document.querySelector('meta[name="theme-color"]');
            const bg = getComputedStyle(document.body).getPropertyValue('--bg-color').trim();
            meta.setAttribute('content', bg);
        }

        window.onclick = function(event) {
            if (event.target.classList.contains('modal')) {
                event.target.classList.remove('active');
            }
        }
    </script>
</body>
</html>
